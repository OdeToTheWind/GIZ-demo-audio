<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TTS Tools Models</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');
        
        html, body { height: 100%; }
        body {
            /* overflow: hidden; */
            margin: 1px;
        }
        h4{
            padding-top: 5px;
            margin: auto;
            text-align: center;
            font-family: 'Roboto', sans-serif;
            font-size: 1.2rem;
            font-weight: 400;
            color:#2e45f3;
        }        
        .line-bt-container, .line-container {
            display: absolute;
            z-index: 999;
            left: 0;
            right: 0;
            width: 100%;
            padding-top: 5px;
        }
        .align-items-center {
            align-items: center !important;
        }
        .d-flex {
            display: flex !important;
        }
        .common-line {
            width: 11.1111111111%;
            padding: .5rem;
        }
        .heading{
            padding-top: 5px;
            margin: auto;
            text-align: center;
            font-family: 'Roboto', sans-serif;
            font-size: 2.5rem;
            font-weight: 400;
            color:#000c65;
	    }
        .form_str{
            padding: 50px;
            border-radius: 10px;
            text-align: center;
            font-family: 'Roboto', sans-serif;
            font-size: 1.5rem;
            color:#000c65;
            display: flex;
            flex-direction: column;
            justify-content: center;
            /* align-items: center; */
	    }
        .word-box {
            display: inline-block;
            padding: 10px;
            margin: 15px;
            cursor: pointer;
        }
        .word-box.selected {
            background-color: #4CAF50;
            color: white;
        }
        .tab-style {
            border: 1px solid rgb(108, 108, 235);
            padding: 5px;
            display: flex;
            flex-direction: column;
        }
        .word-row {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }
        .word-box {
            background-color: #f0f0f0;
            padding: 5px;
            cursor: pointer;
            border-radius: 5px;
        }
        .word-box {
            position: relative;
            background-color: #f0f0f0;
            padding: 5px;
            cursor: pointer;
            border-radius: 5px;
            transition: background-color 0.3s ease-in-out;
        }
        .word-box::before, .word-box::after {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            border-radius: 5px;
            opacity: 0;
            transition: opacity 0.3s ease-in-out;
        }
        .word-box::before {
            background-color: rgba(255, 255, 255, 0.5); /* Before effect style */
        }
        .word-box::after {
            background-color: rgba(0, 0, 0, 0.1); /* After effect style */
        }
        .word-box:hover::before, .word-box:hover::after {
            opacity: 1;
        } 
        .radio-style{
            padding: 10px;
            /* border: 1px solid rgb(108, 108, 235);  */        
        }
        .form-sep{
            display: absolute;
            padding: 5px;
        }
        .player{
            display: flex; /* hide the audio tag initially */
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .audio_tag{
            display: none; /* hide the audio tag initially */
            justify-content: center;
            align-items: center;
            width: 40%;
        }
        #pageloader{
            background: rgba( 255, 255, 255, 0.8 );
            display: none;
            height: 100%;
            position: fixed;
            width: 100%;
            z-index: 9999;
	    }

	    #pageloader img{
            left: 50%;
            margin-left: -32px;
            margin-top: -32px;
            position: absolute;
            top: 50%;
	    }
        .form-container {
            display: flex;
            justify-content: center;
            align-items: center;
            /* height: 100vh; */
            padding: 25px;
            margin: 10px;
        }
        .form-box{
            border: 5px solid rgb(0, 38, 144);
            display: inline-block;
            padding-left: 20px;
            padding-top: 20px;
            padding-right: 20px;
            box-shadow: inset -2px 19px 28px 14px rgb(47 65 111 / 10%); 
            transition: box-shadow 0.3s ease; 
            margin: 0 auto;
        }
        .form-box:hover {
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }
        .textarea_box{
            position: relative;
            width: 600px;
            height: 50px;
            margin-bottom: 50px;
            border: 2px solid rgb(0, 38, 144);
            outline: none;
            background: none;
            padding: 15px;
            border-radius: 10px;
            font-size: 0.8em;
            top: 14px;            
            transition: 0.6s;
            font-family: 'Roboto', sans-serif;
        }
        .textarea_box::placeholder {
            color: gray;
            font-size: 0.8rem;
            font-family: 'Roboto', sans-serif;
        }
        .submit_button{
            width: 40%;
            height: 40px;
            padding: 10px;
            border-radius: 10px;
            background: rgb(0, 38, 144);
            color: #fff;
            border: #fff;
            font-size: 1.2rem;
            font-weight: 400;
        }
        .submit_button:hover{
            color: #024052;
            background: radial-gradient(ellipse at center, rgb(211, 239, 240) 0%, rgb(76, 150, 233) 55%, rgb(0, 12, 101) 100%);
	    }
        .required-field {
            color: red;
            margin-left: 5px; 
        }
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 999;
        }
        
        .modal-content {
            background-color: #fefefe;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid #888;
            border-radius: 10px;
            width: 50%;
        }
        
        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }
        
        .close:hover,
        .close:focus {
            color: #000;
            text-decoration: none;
            cursor: pointer;
        }
        
        .player {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        .loading-indicator {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            font-size: 24px;
            text-align: center;
            padding-top: 20%;
            z-index: 1000;
        }
        /* Style for the select element */
        #wordBox {
            width: 200px; /* Set the width to 40px */
            padding: 15px; /* Add some padding for better visual appearance */
            border: 3px solid #49368c; /* Add a border */
            border-radius: 5px; /* Add rounded corners */
            cursor: pointer; /* Change cursor on hover */

            /* Define a custom dropdown arrow */
            appearance: none;
            -webkit-appearance: none;
            -moz-appearance: none;
            /*background-image: url('dropdown-arrow.png'); /* Replace with your arrow icon */
            background-position: right center;
            background-repeat: no-repeat;
        }

        /* Style for select options on hover */
        #wordBox:hover {
            background-color: #f0f0f0; /* Add a hover effect */
        }

        /* Style for open dropdown */
        #wordBox:active, #wordBox:focus {
            background-color: #fff; /* Add a background color when dropdown is open */
            outline: none; /* Remove the default focus outline */
            border-color: #007bff; /* Change border color when focused */
        }

        /* Move other content when dropdown is open */
        #wordBox:active ~ .content {
            margin-top: 50px; /* Adjust the margin as needed */
        }
        /* Style for the fieldset itself */
        fieldset {
            border: 2px solid #ccc; /* Border around the fieldset */
            border-radius: 10px; /* Rounded corners */
            padding: 10px; /* Padding inside the fieldset */
            margin-bottom: 20px; /* Spacing at the bottom of the fieldset */
        }

        /* Style for the legend (the title of the fieldset) */
        legend {
            font-weight: bold; /* Bold text for the legend */
            font-size: 1.2rem; /* Adjust the font size as needed */
            color: #333; /* Text color for the legend */
            padding: 0 10px; /* Padding around the legend */
            background-color: #f0f0f0; /* Background color for the legend */
            border: 1px solid #ccc; /* Border around the legend */
            border-radius: 5px; /* Rounded corners for the legend */
        }

        


    </style>
</head>
<body>
    <div class="background">
        <h1 class="heading">Text-to-Speech</h1>
        <div class="line-bt-container">
            <div>
                <div class="d-flex align-items-center">
                    <div class="common-line" style="background-color: rgb(229, 0, 0);"></div>
                    <div class="common-line" style="background-color: rgb(192, 41, 0);"></div>
                    <div class="common-line" style="background-color: rgb(247, 128, 88);"></div>
                    <div class="common-line" style="background-color: rgb(0, 184, 189);"></div>
                    <div class="common-line" style="background-color: rgb(0, 235, 233);"></div>
                    <div class="common-line" style="background-color: rgb(35, 182, 255);"></div>
                    <div class="common-line" style="background-color: rgb(76, 150, 233);"></div>
                    <div class="common-line" style="background-color: rgb(0, 38, 144);"></div>
                    <div class="common-line" style="background-color: rgb(0, 12, 101);"></div>
                </div>
            </div>
        </div>
        <div id="pageloader">
            <img src="http://cdnjs.cloudflare.com/ajax/libs/semantic-ui/0.16.1/images/loader-large.gif" alt="processing..." />
        </div>

        <div class="form-container">
            <div class="form-box">
                    <form class="form_str" id="customForm">
                        <div>
                            <fieldset>
                                <legend for="wordBox">Choose a Language:</legend>
                                <select id="wordBox" name="wordBox">
                                    <option value="...">Select Here ... </option>
                                    <option value="bn">Bengali</option>
                                    <!-- <option value="bh">Bhojpuri</option> -->
                                    <option value="ch">Chhattisgarhi</option>
                                    <option value="hi">Hindi</option>
                                    <!-- <option value="mt">Maithili</option>
                                    <option value="mr">Marathi</option>
                                    <option value="mg">Magadhi</option> -->
                                    <option value="kn">Kannada</option>
                                    <option value="te">Telugu</option>
                                </select>
                            </fieldset> 
                            
                            
                        </div>
                
                        <div>
                            <!-- Step 2: Gender selection -->
                            <!-- <label>Gender:</label>
                            <input type="radio" name="gender" value="mal">Male
                            <input type="radio" name="gender" value="fem">Female -->

                            <fieldset>
                                <legend>Choose a Gender:</legend>
                                <input type="radio" id="male" name="gender" value="mal">
                                <label for="male">Male</label>
                                <input type="radio" id="female" name="gender" value="fem">
                                <label for="female">Female</label>
                            </fieldset>
                            
                        </div>
                        
                
                        <!-- Step 3: Dynamic radio buttons -->
                        
                        <fieldset id="radioButtons" class="hidden">
                            <legend>Choose a Model:</legend>
                            <div id="dynamicRadioButtons">
                                <!-- Radio buttons will be generated here -->
                            </div>
                        </fieldset>
                
                        <div>
                            <input  class="textarea_box" type="text" id="text" name="text" placeholder="Enter your text here...">
                        </div>
                        <div> 
                            <!-- <button class="submit_button" type="submit" id="buttonsub">Submit</button> -->
                            <button class="submit_button" type="submit" id="audioButton">Generate Audio</button>
                            <button class="submit_button" type="submit" id="videoButton">Video Generator</button>
                        </div>

                    </form>
                </div>
            </div>

        <!-- Modal for displaying selected choices -->
        <div id="myModal" class="modal" style="display: none;">
            <div class="modal-content">
                <span class="close" id="closeModal">&times;</span>
                <div class="player">
                    <audio class="audio_tag" id="audio" controls></audio>
                </div>                
            </div>            
        </div>        
    </div>
    
    
<script>
    // JavaScript for handling interactions
    const wordBoxSelect = document.getElementById('wordBox');
    const genderRadios = document.getElementsByName('gender');
    const radioButtonsDiv = document.getElementById('radioButtons');
    const dynamicRadioButtonsDiv = document.getElementById('dynamicRadioButtons');
    const modal = document.getElementById('myModal');
    const closeModal = document.getElementById('closeModal');
    
    // Map of word-box and gender combinations to radio button options
    const radioOptions = {
        'bnmal': ['vits'],
        'bnfem': ['vits'],
        'bhmal': ['BB1', 'BB2', 'BB3'],
        'bhfem': ['BF1', 'BF2', 'BF3'],
        'chmal': ['vits'],
        'chfem': ['vits'],
        'himal': ['vits'],
        'hifem': ['glowtts', 'vits'],
        'mgmal': ['AB1', 'AB2', 'AB3'],
        'mgfem': ['AF1', 'AF2', 'AF3'],
        'mrmal': ['BB1', 'BB2', 'BB3'],
        'mrfem': ['BF1', 'BF2', 'BF3'],
        'mtmal': ['CB1', 'CB2', 'CB3'],
        'mtfem': ['CA1', 'CA2', 'CA3'],
        'knmal': ['glowtts', 'vits'],
        'knfem': ['glowtts', 'vits'],
        'temal': ['glowtts', 'vits'],
        'tefem': ['glowtts', 'vits'],
    };
    
    // Function to generate dynamic radio buttons based on selections
    function generateRadioButtons() {
        dynamicRadioButtonsDiv.innerHTML = ''; // Clear previous radio buttons
        const selectedWordBox = wordBoxSelect.value;
        const selectedGender = Array.from(genderRadios).find(radio => radio.checked);
    
        if (selectedWordBox && selectedGender) {
            radioButtonsDiv.classList.remove('hidden');
            const key = `${selectedWordBox}${selectedGender.value}`;
            const options = radioOptions[key];
            if (options) {
                options.forEach((option, index) => {
                    const radioButton = document.createElement('input');
                    radioButton.type = 'radio';
                    radioButton.name = 'radioOption';
                    radioButton.value = option;
                    const label = document.createElement('label');
                    label.appendChild(radioButton);
                    label.appendChild(document.createTextNode(option));
                    dynamicRadioButtonsDiv.appendChild(label);
                });
            }
        } else {
            radioButtonsDiv.classList.add('hidden');
        }
    }
    
    // Listen for changes in word-box selection
    wordBoxSelect.addEventListener('change', generateRadioButtons);
    
    // Listen for changes in gender selection
    genderRadios.forEach(radio => {
        radio.addEventListener('change', generateRadioButtons);
    });
    
    // Prevent form submission for this example
    const customForm = document.getElementById('customForm');
    customForm.addEventListener('submit', async (e) => {
        e.preventDefault();
        const selectedTab = wordBoxSelect.value;
        const selectedCheckbox = Array.from(genderRadios).find(radio => radio.checked).value;
        const selectedRadio = Array.from(document.querySelectorAll('input[name="radioOption"]')).find(option => option.checked).value;
    
        // Open the modal
        modal.style.display = 'block';
    
        // Construct the URL with the selected values
        const text = document.querySelector('#text').value;
        const url = `https://xckszodvuk.execute-api.ap-south-1.amazonaws.com/api/${selectedTab}-${selectedCheckbox}-${selectedRadio}-audio`;
    
        // Before the form submission, show the loading indicator
        $("#loadingIndicator").show();
    
        // Fetch and play audio
        try {
            const response = await fetch(url, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({ text: text })
            });
    
            const data = await response.json();
            console.log(data);
    
            const audioUrl = data.audioUrl;
            const audio = document.querySelector('#audio');
            audio.src = audioUrl;
            audio.play();
            audio.style.display = "block";
            $("#pageloader").fadeOut();
        } catch (error) {
            console.error('Error fetching audio:', error);
        }
        // Hide the loading indicator once audio is ready
        $("#loadingIndicator").hide();
    });
    
    // Close the modal when the close button is clicked
    closeModal.addEventListener('click', () => {
        modal.style.display = 'none';
    });
    
    // Close the modal when clicking outside of it
    window.addEventListener('click', (event) => {
        if (event.target == modal) {
            modal.style.display = 'none';
        }
    });

    // Event listener for the "Video Generator" button
videoButton.addEventListener('click', generateVideo);

// Function to generate video
async function generateVideo() {
    // First, generate the audio using the existing audio generation function
    await generateAudio();

    // Use the selected audio file to generate the video
    const selectedTab = wordBoxSelect.value;
    const selectedCheckbox = Array.from(genderRadios).find(radio => radio.checked).value;
    const selectedRadio = Array.from(document.querySelectorAll('input[name="radioOption"]')).find(option => option.checked).value;

    // Construct the URL for video generation
    const audioUrl = document.querySelector('#audio').src;
    const videoUrl = `https://xckszodvuk.execute-api.com/api/${selectedCheckbox}-video`;

    // Fetch and play the video
    try {
        const response = await fetch(videoUrl, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ audioUrl: audioUrl })
        });

        // Assuming the response contains a video URL
        const videoData = await response.json();
        const video = document.createElement('video');
        video.src = videoData.videoUrl;
        video.controls = true;
        video.autoplay = true;
        video.style.display = "block";

        // Replace the modal content with the video
        modal.innerHTML = ''; // Clear previous content
        modal.appendChild(video);
    } catch (error) {
        console.error('Error fetching video:', error);
    }
}

    </script>

        
    
    
    
</body>
</html>
